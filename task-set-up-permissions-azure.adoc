---
sidebar: sidebar 
permalink: task-set-up-permissions-azure.html 
keywords: azure permissions, set up permissions, setup permissions, permissions, custom role, azure custom role, service principal, azure ad service principal, json 
summary: Richten Sie Azure-Berechtigungen ein, damit Sie BlueXP für das Management Ihrer Daten- und Storage-Infrastruktur in Azure verwenden können. Wie Sie Berechtigungen einrichten, hängt von der Installationsoption ab, die Sie verwenden möchten. 
---
= Azure-Berechtigungen einrichten
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Richten Sie Berechtigungen in Azure ein, damit Sie den Connector mit den Berechtigungen implementieren können, die er für das Management Ihrer Daten- und Storage-Infrastruktur benötigt. Wie Sie Berechtigungen einrichten, hängt von der Installationsoption ab, die Sie verwenden möchten.

Sie können aus den folgenden Installationsoptionen wählen:

* *Installation aus BlueXP*: Einrichten von Berechtigungen, die es BlueXP ermöglichen, sich bei Azure zu authentifizieren und die VM bereitzustellen. BlueXP richtet während der Implementierung automatisch Berechtigungen für die Connector-VM ein.
+
<<Richten Sie Berechtigungen zum Erstellen des Connectors aus BlueXP ein,Schritt-für-Schritt-Anleitungen anzeigen>>.

* *Installation vom Azure Marketplace*: Richten Sie eine benutzerdefinierte Azure-Rolle ein, die Sie der Connector-VM oder einem Azure AD-Dienst-Principal zuordnen können.
+
<<Richten Sie Berechtigungen ein, die nach der Implementierung oder manuellen Installation von Azure Marketplace zugewiesen werden sollen,Schritt-für-Schritt-Anleitungen anzeigen>>.

* *Manuelle Installation*: Richten Sie eine benutzerdefinierte Azure-Rolle ein, die mit der Connector-VM oder einem Azure AD-Dienst-Prinzipal verknüpft werden soll.
+
<<Richten Sie Berechtigungen ein, die nach der Implementierung oder manuellen Installation von Azure Marketplace zugewiesen werden sollen,Schritt-für-Schritt-Anleitungen anzeigen>>.





== Richten Sie Berechtigungen zum Erstellen des Connectors aus BlueXP ein

Um einen Connector aus BlueXP zu erstellen, müssen Sie für BlueXP eine Anmeldung bereitstellen, die über die erforderlichen Berechtigungen zum Erstellen der Connector-VM in Azure verfügt. Sie haben zwei Möglichkeiten:

. Melden Sie sich bei Aufforderung mit Ihrem Microsoft-Konto an. Dieses Konto muss über spezifische Azure Berechtigungen verfügen. Dies ist die Standardoption.
. Geben Sie Details zu einem Azure AD-Serviceprincipal an. Dieser Service-Principal erfordert auch spezielle Berechtigungen.


Bei beiden Optionen ist der erste Schritt das Erstellen einer benutzerdefinierten Rolle.



=== Erstellen Sie eine benutzerdefinierte Rolle

Erstellen Sie eine benutzerdefinierte Rolle, die Sie Ihrem Azure-Konto oder einem Service-Prinzipal zuweisen können.

.Schritte
. Kopieren Sie die erforderlichen Berechtigungen für eine neue benutzerdefinierte Rolle in Azure und speichern Sie sie in einer JSON-Datei.
+

NOTE: Diese Richtlinie enthält nur die Berechtigungen, die zum Starten der Connector VM in Azure von BlueXP erforderlich sind. Verwenden Sie diese Richtlinie nicht für andere Situationen. Wenn BlueXP den Connector erstellt, wendet er eine neue Gruppe von Berechtigungen auf die Connector-VM an, die es dem Connector ermöglicht, die Ressourcen in Ihrer Public-Cloud-Umgebung zu verwalten.

+
[source, json]
----
{
    "Name": "Azure SetupAsService",
    "Actions": [
        "Microsoft.Compute/disks/delete",
        "Microsoft.Compute/disks/read",
        "Microsoft.Compute/disks/write",
        "Microsoft.Compute/locations/operations/read",
        "Microsoft.Compute/operations/read",
        "Microsoft.Compute/virtualMachines/instanceView/read",
        "Microsoft.Compute/virtualMachines/read",
        "Microsoft.Compute/virtualMachines/write",
        "Microsoft.Compute/virtualMachines/delete",
        "Microsoft.Compute/virtualMachines/extensions/write",
        "Microsoft.Compute/virtualMachines/extensions/read",
        "Microsoft.Compute/availabilitySets/read",
        "Microsoft.Network/locations/operationResults/read",
        "Microsoft.Network/locations/operations/read",
        "Microsoft.Network/networkInterfaces/join/action",
        "Microsoft.Network/networkInterfaces/read",
        "Microsoft.Network/networkInterfaces/write",
        "Microsoft.Network/networkInterfaces/delete",
        "Microsoft.Network/networkSecurityGroups/join/action",
        "Microsoft.Network/networkSecurityGroups/read",
        "Microsoft.Network/networkSecurityGroups/write",
        "Microsoft.Network/virtualNetworks/checkIpAddressAvailability/read",
        "Microsoft.Network/virtualNetworks/read",
        "Microsoft.Network/virtualNetworks/subnets/join/action",
        "Microsoft.Network/virtualNetworks/subnets/read",
        "Microsoft.Network/virtualNetworks/subnets/virtualMachines/read",
        "Microsoft.Network/virtualNetworks/virtualMachines/read",
        "Microsoft.Network/publicIPAddresses/write",
        "Microsoft.Network/publicIPAddresses/read",
        "Microsoft.Network/publicIPAddresses/delete",
        "Microsoft.Network/networkSecurityGroups/securityRules/read",
        "Microsoft.Network/networkSecurityGroups/securityRules/write",
        "Microsoft.Network/networkSecurityGroups/securityRules/delete",
        "Microsoft.Network/publicIPAddresses/join/action",
        "Microsoft.Network/locations/virtualNetworkAvailableEndpointServices/read",
        "Microsoft.Network/networkInterfaces/ipConfigurations/read",
        "Microsoft.Resources/deployments/operations/read",
        "Microsoft.Resources/deployments/read",
        "Microsoft.Resources/deployments/delete",
        "Microsoft.Resources/deployments/cancel/action",
        "Microsoft.Resources/deployments/validate/action",
        "Microsoft.Resources/resources/read",
        "Microsoft.Resources/subscriptions/operationresults/read",
        "Microsoft.Resources/subscriptions/resourceGroups/delete",
        "Microsoft.Resources/subscriptions/resourceGroups/read",
        "Microsoft.Resources/subscriptions/resourcegroups/resources/read",
        "Microsoft.Resources/subscriptions/resourceGroups/write",
        "Microsoft.Authorization/roleDefinitions/write",
        "Microsoft.Authorization/roleAssignments/write",
        "Microsoft.MarketplaceOrdering/offertypes/publishers/offers/plans/agreements/read",
        "Microsoft.MarketplaceOrdering/offertypes/publishers/offers/plans/agreements/write",
        "Microsoft.Network/networkSecurityGroups/delete",
        "Microsoft.Storage/storageAccounts/delete",
        "Microsoft.Storage/storageAccounts/write",
        "Microsoft.Resources/deployments/write",
        "Microsoft.Resources/deployments/operationStatuses/read",
        "Microsoft.Authorization/roleAssignments/read"
    ],
    "NotActions": [],
    "AssignableScopes": [],
    "Description": "Azure SetupAsService",
    "IsCustom": "true"
}
----
. Ändern Sie den JSON, indem Sie Ihre Azure Abonnement-ID dem zuweisbaren Umfang hinzufügen.
+
*Beispiel*

+
[source, json]
----
"AssignableScopes": [
"/subscriptions/d333af45-0d07-4154-943d-c25fbzzzzzzz"
],
----
. Verwenden Sie die JSON-Datei, um eine benutzerdefinierte Rolle in Azure zu erstellen.
+
In den folgenden Schritten wird beschrieben, wie die Rolle mithilfe von Bash in Azure Cloud Shell erstellt wird.

+
.. Starten https://docs.microsoft.com/en-us/azure/cloud-shell/overview["Azure Cloud Shell"^] Und wählen Sie die Bash-Umgebung.
.. Laden Sie die JSON-Datei hoch.
+
image:screenshot_azure_shell_upload.png["Einen Screenshot der Azure Cloud Shell, in dem Sie die Option zum Hochladen einer Datei auswählen können."]

.. Geben Sie den folgenden Befehl der Azure CLI ein:
+
[source, azurecli]
----
az role definition create --role-definition Policy_for_Setup_As_Service_Azure.json
----


+
Sie sollten jetzt eine benutzerdefinierte Rolle namens _Azure SetupAsService_ haben. Sie können diese benutzerdefinierte Rolle nun auf Ihr Benutzerkonto oder auf einen Dienstprinzipal anwenden.





=== Richten Sie eine Authentifizierungsmethode ein

Für die Implementierung des BlueXP Connector muss BlueXP sich mit Azure authentifizieren. Sie haben die Wahl zwischen zwei Azure-Authentifizierungsmethoden.

[role="tabbed-block"]
====
.Azure-Benutzerkonto
--
Weisen Sie die benutzerdefinierte Rolle dem Benutzer zu, der den Connector aus BlueXP bereitstellen wird.

.Schritte
. Öffnen Sie im Azure-Portal den Dienst *Abonnements* und wählen Sie das Abonnement des Benutzers aus.
. Klicken Sie auf *Access Control (IAM)*.
. Klicken Sie auf *Hinzufügen* > *Rollenzuordnung hinzufügen* und fügen Sie dann die Berechtigungen hinzu:
+
.. Wählen Sie die Rolle *Azure SetupAsService* aus und klicken Sie auf *Weiter*.
+

NOTE: Azure SetupAsService ist der Standardname, der in der Connector Deployment Policy für Azure angegeben ist. Wenn Sie einen anderen Namen für die Rolle ausgewählt haben, wählen Sie stattdessen diesen Namen aus.

.. *Benutzer, Gruppe oder Serviceprincipal* ausgewählt lassen.
.. Klicken Sie auf *Mitglieder auswählen*, wählen Sie Ihr Benutzerkonto aus und klicken Sie auf *Auswählen*.
.. Klicken Sie Auf *Weiter*.
.. Klicken Sie auf *Review + Assign*.




.Ergebnis
Der Azure-Benutzer verfügt nun über die erforderlichen Berechtigungen für die Bereitstellung des Connectors von BlueXP.

--
.Service-Principal
--
Anstatt sich mit Ihrem Azure Konto anzumelden, können Sie BlueXP mit den Zugangsdaten für einen Azure Serviceprinzipal bereitstellen, der über die erforderlichen Berechtigungen verfügt.

Ein Service-Principal in Azure Active Directory erstellen und einrichten, um die für BlueXP erforderlichen Azure Zugangsdaten zu erhalten.

.Erstellen einer Azure Active Directory Applikation zur rollenbasierten Zugriffssteuerung
. Stellen Sie sicher, dass Sie in Azure über die Berechtigungen zum Erstellen einer Active Directory-Anwendung und zum Zuweisen der Anwendung zu einer Rolle verfügen.
+
Weitere Informationen finden Sie unter https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#required-permissions/["Microsoft Azure-Dokumentation: Erforderliche Berechtigungen"^]

. Öffnen Sie über das Azure-Portal den *Azure Active Directory*-Service.
+
image:screenshot_azure_ad.gif["Zeigt den Active Directory-Dienst in Microsoft Azure an."]

. Klicken Sie im Menü auf *App-Registrierungen*.
. Klicken Sie auf *Neue Registrierung*.
. Geben Sie Details zur Anwendung an:
+
** *Name*: Geben Sie einen Namen für die Anwendung ein.
** *Kontotyp*: Wählen Sie einen Kontotyp aus (jeder kann mit BlueXP verwendet werden).
** *Redirect URI*: Sie können dieses Feld leer lassen.


. Klicken Sie Auf *Registrieren*.
+
Sie haben die AD-Anwendung und den Service-Principal erstellt.



.Weisen Sie der Anwendung die benutzerdefinierte Rolle zu
. Öffnen Sie im Azure-Portal den Service *Abonnements*.
. Wählen Sie das Abonnement aus.
. Klicken Sie auf *Zugriffskontrolle (IAM) > Hinzufügen > Rollenzuweisung hinzufügen*.
. Wählen Sie auf der Registerkarte * Role* die Rolle *BlueXP Operator* aus und klicken Sie auf *Next*.
. Führen Sie auf der Registerkarte *Mitglieder* die folgenden Schritte aus:
+
.. *Benutzer, Gruppe oder Serviceprincipal* ausgewählt lassen.
.. Klicken Sie auf *Mitglieder auswählen*.
+
image:screenshot-azure-service-principal-role.png["Ein Screenshot des Azure-Portals, auf dem die Registerkarte Mitglieder angezeigt wird, wenn einer Anwendung eine Rolle hinzugefügt wird."]

.. Suchen Sie nach dem Namen der Anwendung.
+
Hier ein Beispiel:

+
image:screenshot_azure_service_principal_role.png["Ein Screenshot des Azure-Portals, in dem das Formular Rollenzuordnung hinzufügen im Azure-Portal angezeigt wird."]

.. Wählen Sie die Anwendung aus und klicken Sie auf *Auswählen*.
.. Klicken Sie Auf *Weiter*.


. Klicken Sie auf *Review + Assign*.
+
Der Service-Principal verfügt jetzt über die erforderlichen Azure-Berechtigungen zur Bereitstellung des Connectors.

+
Wenn Sie Ressourcen in mehreren Azure-Abonnements managen möchten, müssen Sie den Service-Prinzipal an jedes dieser Abonnements binden. Mit BlueXP können Sie beispielsweise das Abonnement auswählen, das Sie bei der Implementierung von Cloud Volumes ONTAP verwenden möchten.



.Fügen Sie Windows Azure Service Management-API-Berechtigungen hinzu
. Klicken Sie im *Azure Active Directory*-Dienst auf *App-Registrierungen* und wählen Sie die Anwendung aus.
. Klicken Sie auf *API-Berechtigungen > Berechtigung hinzufügen*.
. Wählen Sie unter *Microsoft APIs* *Azure Service Management* aus.
+
image:screenshot_azure_service_mgmt_apis.gif["Ein Screenshot des Azure Portals, in dem die Berechtigungen der Azure Service Management API angezeigt werden."]

. Klicken Sie auf *Zugriff auf Azure Service Management als Benutzer der Organisation* und dann auf *Berechtigungen hinzufügen*.
+
image:screenshot_azure_service_mgmt_apis_add.gif["Ein Screenshot des Azure Portals, in dem das Hinzufügen der Azure Service Management APIs angezeigt wird"]



.Die Anwendungs-ID und die Verzeichnis-ID für die Anwendung abrufen
. Klicken Sie im *Azure Active Directory*-Dienst auf *App-Registrierungen* und wählen Sie die Anwendung aus.
. Kopieren Sie die *Application (Client) ID* und die *Directory (Tenant) ID*.
+
image:screenshot_azure_app_ids.gif["Ein Screenshot, der die Anwendungs-ID (Client) und die Verzeichnis-ID (Mandant) für eine Anwendung in Azure Active Directory anzeigt"]

+
Wenn Sie das Azure-Konto zu BlueXP hinzufügen, müssen Sie die Anwendungs-ID (Client) und die Verzeichnis-ID (Mandant) für die Anwendung angeben. BlueXP verwendet die IDs, um sich programmatisch anzumelden.



.Erstellen Sie einen Clientschlüssel
. Öffnen Sie den Dienst *Azure Active Directory*.
. Klicken Sie auf *App-Registrierungen* und wählen Sie Ihre Anwendung aus.
. Klicken Sie auf *Zertifikate & Geheimnisse > Neuer Client Secret*.
. Geben Sie eine Beschreibung des Geheimnisses und eine Dauer an.
. Klicken Sie Auf *Hinzufügen*.
. Kopieren Sie den Wert des Clientgeheimnisses.
+
image:screenshot_azure_client_secret.gif["Ein Screenshot des Azure-Portals, in dem ein Client-Geheimnis für den Azure AD-Service-Principal angezeigt wird"]

+
Jetzt gibt es einen Client-Schlüssel, den BlueXP zur Authentifizierung mit Azure AD verwenden kann.



.Ergebnis
Ihr Service-Principal ist jetzt eingerichtet und Sie sollten die Anwendungs- (Client-)ID, die Verzeichnis- (Mandanten-)ID und den Wert des Clientgeheimnisses kopiert haben. Sie müssen diese Informationen in BlueXP eingeben, wenn Sie den Connector erstellen.

--
====


== Richten Sie Berechtigungen ein, die nach der Implementierung oder manuellen Installation von Azure Marketplace zugewiesen werden sollen

Wenn Sie den Connector über den Azure Marketplace bereitstellen oder die Connector-Software manuell auf Ihrem eigenen Linux-Host installieren, können Sie Berechtigungen wie folgt bereitstellen:

* Option 1: Weisen Sie der Azure VM eine benutzerdefinierte Rolle mit einer vom System zugewiesenen gemanagten Identität zu.
* Option 2: Bereitstellung der Zugangsdaten für einen Azure Serviceprinzipal für BlueXP mit den erforderlichen Berechtigungen


[role="tabbed-block"]
====
.Benutzerdefinierte Rolle
--
.Schritte
. Wenn Sie planen, die Software manuell auf Ihrem eigenen Host zu installieren, aktivieren Sie eine vom System zugewiesene verwaltete Identität auf der VM, sodass Sie die erforderlichen Azure-Berechtigungen über eine benutzerdefinierte Rolle bereitstellen können.
+
https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm["Microsoft Azure-Dokumentation: Gemanagte Identitäten für Azure-Ressourcen auf einer VM über das Azure-Portal konfigurieren"^]

. Kopieren Sie den Inhalt des link:reference-permissions-azure.html["Benutzerdefinierte Rollenberechtigungen für den Konnektor"] Und speichern Sie sie in einer JSON-Datei.
. Ändern Sie die JSON-Datei, indem Sie dem zuweisbaren Bereich Azure-Abonnement-IDs hinzufügen.
+
Sie sollten für jedes Azure-Abonnement, das Sie mit BlueXP verwenden möchten, die ID hinzufügen.

+
*Beispiel*

+
[source, json]
----
"AssignableScopes": [
"/subscriptions/d333af45-0d07-4154-943d-c25fbzzzzzzz",
"/subscriptions/54b91999-b3e6-4599-908e-416e0zzzzzzz",
"/subscriptions/398e471c-3b42-4ae7-9b59-ce5bbzzzzzzz"
----
. Verwenden Sie die JSON-Datei, um eine benutzerdefinierte Rolle in Azure zu erstellen.
+
In den folgenden Schritten wird beschrieben, wie die Rolle mithilfe von Bash in Azure Cloud Shell erstellt wird.

+
.. Starten https://docs.microsoft.com/en-us/azure/cloud-shell/overview["Azure Cloud Shell"^] Und wählen Sie die Bash-Umgebung.
.. Laden Sie die JSON-Datei hoch.
+
image:screenshot_azure_shell_upload.png["Einen Screenshot der Azure Cloud Shell, in dem Sie die Option zum Hochladen einer Datei auswählen können."]

.. Verwenden Sie die Azure CLI, um die benutzerdefinierte Rolle zu erstellen:
+
[source, azurecli]
----
az role definition create --role-definition Connector_Policy.json
----




.Ergebnis
Sie sollten nun eine benutzerdefinierte Rolle namens BlueXP Operator haben, die Sie der virtuellen Connector-Maschine zuweisen können.

link:task-provide-permissions-azure.html["Erfahren Sie, wie Sie diese Berechtigungen für BlueXP bereitstellen"].

--
.Service-Principal
--
Ein Service-Principal in Azure Active Directory erstellen und einrichten, um die für BlueXP erforderlichen Azure Zugangsdaten zu erhalten.

.Erstellen einer Azure Active Directory Applikation zur rollenbasierten Zugriffssteuerung
. Stellen Sie sicher, dass Sie in Azure über die Berechtigungen zum Erstellen einer Active Directory-Anwendung und zum Zuweisen der Anwendung zu einer Rolle verfügen.
+
Weitere Informationen finden Sie unter https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#required-permissions/["Microsoft Azure-Dokumentation: Erforderliche Berechtigungen"^]

. Öffnen Sie über das Azure-Portal den *Azure Active Directory*-Service.
+
image:screenshot_azure_ad.gif["Zeigt den Active Directory-Dienst in Microsoft Azure an."]

. Klicken Sie im Menü auf *App-Registrierungen*.
. Klicken Sie auf *Neue Registrierung*.
. Geben Sie Details zur Anwendung an:
+
** *Name*: Geben Sie einen Namen für die Anwendung ein.
** *Kontotyp*: Wählen Sie einen Kontotyp aus (jeder kann mit BlueXP verwendet werden).
** *Redirect URI*: Sie können dieses Feld leer lassen.


. Klicken Sie Auf *Registrieren*.
+
Sie haben die AD-Anwendung und den Service-Principal erstellt.



.Anwendung einer Rolle zuweisen
. Erstellen einer benutzerdefinierten Rolle:
+
.. Kopieren Sie den Inhalt des link:reference-permissions-azure.html["Benutzerdefinierte Rollenberechtigungen für den Konnektor"] Und speichern Sie sie in einer JSON-Datei.
.. Ändern Sie die JSON-Datei, indem Sie dem zuweisbaren Bereich Azure-Abonnement-IDs hinzufügen.
+
Sie sollten die ID für jedes Azure Abonnement hinzufügen, aus dem Benutzer Cloud Volumes ONTAP Systeme erstellen.

+
*Beispiel*

+
[source, json]
----
"AssignableScopes": [
"/subscriptions/d333af45-0d07-4154-943d-c25fbzzzzzzz",
"/subscriptions/54b91999-b3e6-4599-908e-416e0zzzzzzz",
"/subscriptions/398e471c-3b42-4ae7-9b59-ce5bbzzzzzzz"
----
.. Verwenden Sie die JSON-Datei, um eine benutzerdefinierte Rolle in Azure zu erstellen.
+
In den folgenden Schritten wird beschrieben, wie die Rolle mithilfe von Bash in Azure Cloud Shell erstellt wird.

+
*** Starten https://docs.microsoft.com/en-us/azure/cloud-shell/overview["Azure Cloud Shell"^] Und wählen Sie die Bash-Umgebung.
*** Laden Sie die JSON-Datei hoch.
+
image:screenshot_azure_shell_upload.png["Einen Screenshot der Azure Cloud Shell, in dem Sie die Option zum Hochladen einer Datei auswählen können."]

*** Verwenden Sie die Azure CLI, um die benutzerdefinierte Rolle zu erstellen:
+
[source, azurecli]
----
az role definition create --role-definition Connector_Policy.json
----
+
Sie sollten nun eine benutzerdefinierte Rolle namens BlueXP Operator haben, die Sie der virtuellen Connector-Maschine zuweisen können.





. Applikation der Rolle zuweisen:
+
.. Öffnen Sie im Azure-Portal den Service *Abonnements*.
.. Wählen Sie das Abonnement aus.
.. Klicken Sie auf *Zugriffskontrolle (IAM) > Hinzufügen > Rollenzuweisung hinzufügen*.
.. Wählen Sie auf der Registerkarte * Role* die Rolle *BlueXP Operator* aus und klicken Sie auf *Next*.
.. Führen Sie auf der Registerkarte *Mitglieder* die folgenden Schritte aus:
+
*** *Benutzer, Gruppe oder Serviceprincipal* ausgewählt lassen.
*** Klicken Sie auf *Mitglieder auswählen*.
+
image:screenshot-azure-service-principal-role.png["Ein Screenshot des Azure-Portals, auf dem die Registerkarte Mitglieder angezeigt wird, wenn einer Anwendung eine Rolle hinzugefügt wird."]

*** Suchen Sie nach dem Namen der Anwendung.
+
Hier ein Beispiel:

+
image:screenshot_azure_service_principal_role.png["Ein Screenshot des Azure-Portals, in dem das Formular Rollenzuordnung hinzufügen im Azure-Portal angezeigt wird."]

*** Wählen Sie die Anwendung aus und klicken Sie auf *Auswählen*.
*** Klicken Sie Auf *Weiter*.


.. Klicken Sie auf *Review + Assign*.
+
Der Service-Principal verfügt jetzt über die erforderlichen Azure-Berechtigungen zur Bereitstellung des Connectors.

+
Wenn Sie Cloud Volumes ONTAP aus mehreren Azure Subscriptions bereitstellen möchten, müssen Sie den Service-Prinzipal an jedes dieser Subscriptions binden. Mit BlueXP können Sie das Abonnement auswählen, das Sie bei der Bereitstellung von Cloud Volumes ONTAP verwenden möchten.





.Fügen Sie Windows Azure Service Management-API-Berechtigungen hinzu
. Klicken Sie im *Azure Active Directory*-Dienst auf *App-Registrierungen* und wählen Sie die Anwendung aus.
. Klicken Sie auf *API-Berechtigungen > Berechtigung hinzufügen*.
. Wählen Sie unter *Microsoft APIs* *Azure Service Management* aus.
+
image:screenshot_azure_service_mgmt_apis.gif["Ein Screenshot des Azure Portals, in dem die Berechtigungen der Azure Service Management API angezeigt werden."]

. Klicken Sie auf *Zugriff auf Azure Service Management als Benutzer der Organisation* und dann auf *Berechtigungen hinzufügen*.
+
image:screenshot_azure_service_mgmt_apis_add.gif["Ein Screenshot des Azure Portals, in dem das Hinzufügen der Azure Service Management APIs angezeigt wird"]



.Die Anwendungs-ID und die Verzeichnis-ID für die Anwendung abrufen
. Klicken Sie im *Azure Active Directory*-Dienst auf *App-Registrierungen* und wählen Sie die Anwendung aus.
. Kopieren Sie die *Application (Client) ID* und die *Directory (Tenant) ID*.
+
image:screenshot_azure_app_ids.gif["Ein Screenshot, der die Anwendungs-ID (Client) und die Verzeichnis-ID (Mandant) für eine Anwendung in Azure Active Directory anzeigt"]

+
Wenn Sie das Azure-Konto zu BlueXP hinzufügen, müssen Sie die Anwendungs-ID (Client) und die Verzeichnis-ID (Mandant) für die Anwendung angeben. BlueXP verwendet die IDs, um sich programmatisch anzumelden.



.Erstellen Sie einen Clientschlüssel
. Öffnen Sie den Dienst *Azure Active Directory*.
. Klicken Sie auf *App-Registrierungen* und wählen Sie Ihre Anwendung aus.
. Klicken Sie auf *Zertifikate & Geheimnisse > Neuer Client Secret*.
. Geben Sie eine Beschreibung des Geheimnisses und eine Dauer an.
. Klicken Sie Auf *Hinzufügen*.
. Kopieren Sie den Wert des Clientgeheimnisses.
+
image:screenshot_azure_client_secret.gif["Ein Screenshot des Azure-Portals, in dem ein Client-Geheimnis für den Azure AD-Service-Principal angezeigt wird"]

+
Jetzt gibt es einen Client-Schlüssel, den BlueXP zur Authentifizierung mit Azure AD verwenden kann.



.Ergebnis
Ihr Service-Principal ist jetzt eingerichtet und Sie sollten die Anwendungs- (Client-)ID, die Verzeichnis- (Mandanten-)ID und den Wert des Clientgeheimnisses kopiert haben. Sie müssen diese Informationen in BlueXP eingeben, wenn Sie ein Azure-Konto hinzufügen.

link:task-provide-permissions-azure.html["Erfahren Sie, wie Sie diese Berechtigungen für BlueXP bereitstellen"].

--
====